{% extends 'base.html' %}
{% load static %}
{% block title %}Login - PsiFi{% endblock %} 
{%block content %}

<div class="login-container">
  <!-- Background Elements -->
  <div class="background-elements">
    <div class="grid-overlay"></div>
    <div class="floating-accent accent-1"></div>
    <div class="floating-accent accent-2"></div>
    <!-- Floating Orbs (from signup) -->
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>
    <div class="floating-orb orb-3"></div>
  </div>

  <!-- Floating Particles -->
  <div class="particles-container">
    {% for i in "12345678901234567890" %}
      <div class="particle particle-{{ forloop.counter }}"></div>
    {% endfor %}
  </div>

  <!-- Main Login Card -->
  <div class="login-card">
    <!-- Header Section -->
    <div class="login-header">
      <div class="logo-section">
           <img
          src="{% static 'images/logo_psifi.png' %}"
          alt="PsiFi Logo"
          class="logo-circle"
        />
        <h2 class="login-title">Welcome Back</h2>
        <p class="login-subtitle">Log in to your PsiFi account</p>
      </div>
    </div>

    <!-- Form Section -->
    <div class="login-form-container">
      <form method="post" class="login-form" id="loginForm">
        {% csrf_token %}

        <div class="form-fields">
          {% for field in form %}
          <div class="form-group">
            <label for="{{ field.id_for_label }}" class="form-label">
              {% if field.name == 'username' %}
              <i class="fas fa-user"></i>
              {% elif field.name == 'password' %}
              <i class="fas fa-lock"></i>
              {% elif field.name == 'email' %}
              <i class="fas fa-envelope"></i>
              {% endif %} {{ field.label }}
            </label>

            <div class="input-wrapper">
              {% if field.name == 'password' %}
              <input
                type="password"
                name="{{ field.name }}"
                id="{{ field.id_for_label }}"
                class="form-input"
                placeholder="Enter your password"
                value="{{ field.value|default:'' }}"
                required
                style="padding-right: 48px !important;"
              />
              <button type="button" class="password-toggle" onclick="togglePassword('{{ field.id_for_label }}')">
                <i class="fas fa-eye" id="eye-{{ field.id_for_label }}"></i>
              </button>
              {% else %}
              <input
                type="{{ field.field.widget.input_type|default:'text' }}"
                name="{{ field.name }}"
                id="{{ field.id_for_label }}"
                class="form-input"
                placeholder="Enter your {{ field.label|lower }}"
                value="{{ field.value|default:'' }}"
                {%
                if
                field.field.required
                %}required{%
                endif
                %}
              />
              {% endif %}
            </div>

            {% if field.errors %}
            <div class="field-errors">
              {% for error in field.errors %}
              <span class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                {{ error }}
              </span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>

        <!-- Submit Button -->
        <button type="submit" class="login-btn" id="loginBtn">
          <span class="btn-text">Log in</span>
          <span class="btn-loader" style="display: none">
            <i class="fas fa-spinner fa-spin"></i>
          </span>
        </button>
      </form>
      <a href="{% url 'name_password_reset' %}" class="signup-link" style="margin-top: 10px;">Forgot password?</a>

      <!-- Divider -->
      <div class="divider">
        <span class="divider-text">or</span>
      </div>

      <!-- Sign Up Link -->
      <div class="signup-section">
        <p class="signup-text">
          Don't have an account?
          <a href="{% url 'signup' %}" class="signup-link">
            Create one here
            <i class="fas fa-arrow-right"></i>
          </a>
        </p>
      </div>
    </div>
  </div>

  <!-- Back to Home Link -->
  <div class="back-home">
    <a href="/" class="back-link">
      <i class="fas fa-arrow-left"></i>
      <span>Back to home</span>
    </a>
  </div>

<style>
  /* Reset and Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

.back-home {
  position: absolute;
  top: 24px;
  left: 24px;
  z-index: 100;
}

  .login-container {
    min-height: 100vh;
    background: url('../../static/images/psifi_bg.png');
    background-size: cover;            /* fills entire screen */
    background-position: center center; /* keeps the focus in the middle */
    background-repeat: repeat-x;      /* prevent tiling */
    background-attachment: fixed;      /* optional: gives a nice parallax-like effect */
    background-color: black;           /* fallback in case image doesnâ€™t load */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(1rem, 4vw, 2rem);
    position: relative;
    overflow: hidden;
    /* font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif; */
  }

  /* Background Elements */
  .background-elements {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
  }

  .grid-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(
        rgba(34, 139, 34, 0.03) 1px,
        transparent 1px
      ),
      linear-gradient(90deg, rgba(34, 139, 34, 0.03) 1px, transparent 1px);
    background-size: clamp(50px, 10vw, 100px) clamp(50px, 10vw, 100px);
  }

  /* Orbs + Particles (copied from signup) */
  .background-elements { position: absolute; inset: 0; overflow: hidden; z-index: 1; pointer-events: none; }

  .floating-orb { filter: blur(64px); opacity: 0.40; position: absolute; }
  .orb-1 { width: 320px; height: 320px; background: radial-gradient(circle at 30% 30%, rgba(12,134,96,0.45), rgba(4,30,18,0.65)); top: -10%; left: -5%; }
  .orb-2 { width: 420px; height: 420px; background: radial-gradient(circle at 70% 40%, rgba(24,160,80,0.45), rgba(3,18,10,0.65)); bottom: -15%; right: -10%; }
  .orb-3 { width: 360px; height: 360px; background: radial-gradient(circle at 50% 50%, rgba(6,92,70,0.35), rgba(0,0,0,0.7)); top: 40%; right: 5%; }

  .particles-container { position: absolute; inset: 0; overflow: hidden; z-index: 1; pointer-events: none; }
  .particle { position: absolute; width: 6px; height: 6px; background: rgba(255,255,255,0.12); border-radius: 50%; animation: particleFloat 8s linear infinite; box-shadow: 0 0 8px rgba(255,255,255,0.15); }
  .particle:nth-child(odd) { animation-duration: 6s; }
  .particle:nth-child(even) { animation-duration: 10s; }
  .particle-1 { left: 10%; animation-delay: 0s; }
  .particle-2 { left: 20%; animation-delay: 1s; }
  .particle-3 { left: 30%; animation-delay: 2s; }
  .particle-4 { left: 40%; animation-delay: 3s; }
  .particle-5 { left: 50%; animation-delay: 4s; }
  .particle-6 { left: 60%; animation-delay: 5s; }
  .particle-7 { left: 70%; animation-delay: 6s; }
  .particle-8 { left: 80%; animation-delay: 7s; }
  .particle-9 { left: 90%; animation-delay: 8s; }
  .particle-10 { left: 15%; animation-delay: 9s; }
  .particle-11 { left: 25%; animation-delay: 10s; }
  .particle-12 { left: 35%; animation-delay: 11s; }
  .particle-13 { left: 45%; animation-delay: 12s; }
  .particle-14 { left: 55%; animation-delay: 13s; }
  .particle-15 { left: 65%; animation-delay: 14s; }
  .particle-16 { left: 75%; animation-delay: 15s; }
  .particle-17 { left: 85%; animation-delay: 16s; }
  .particle-18 { left: 95%; animation-delay: 17s; }
  .particle-19 { left: 5%; animation-delay: 18s; }
  .particle-20 { left: 95%; animation-delay: 19s; }

  @keyframes particleFloat { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }

  /* Replace background image with gradient like signup */
  .login-container {
    background: linear-gradient(135deg, #000000 0%, #030a06 42%, #082015 70%, #0b3d1f 100%);
    background-attachment: fixed;
  }

  /* Button style like register-btn */
  .login-btn {
    width: 100%;
    height: 52px;
    background: linear-gradient(135deg, #17501C 0%, #003122 100%);
    border: none;
    border-radius: 999px;
    color: white;
    font-weight: 700;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(23,80,28,0.25);
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 28px;
  }

  .login-btn:hover { transform: translateY(-2px); box-shadow: 0 15px 35px rgba(34,140,34,0.35); }

  /* Heading and text color tweaks to match signup */
  .login-title { color: rgba(255,255,255,0.95); }
  .login-subtitle { color: rgba(255,255,255,0.8); }

  .floating-accent {
    position: absolute;
    border-radius: 50%;
    animation: float 8s ease-in-out infinite;
  }

  .accent-1 {
    width: clamp(80px, 15vw, 120px);
    height: clamp(80px, 15vw, 120px);
    top: 15%;
    right: 15%;
    background: radial-gradient(circle, rgba(34, 139, 34, 0.08), transparent);
    animation-delay: 0s;
  }

  .accent-2 {
    width: clamp(60px, 12vw, 80px);
    height: clamp(60px, 12vw, 80px);
    bottom: 20%;
    left: 20%;
    background: radial-gradient(circle, rgba(0, 100, 0, 0.06), transparent);
    animation-delay: 4s;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-15px) rotate(180deg);
    }
  }

  /* Main Login Card */
  .login-card {
    background: rgba(179, 255, 179, 0.043);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(24, 78, 18, 0.462);
    backdrop-filter: blur(20px);
    border-radius: clamp(12px, 2vw, 16px);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    width: 100%;
    /* slightly larger max width for better balance on desktop */
    max-width: min(520px, 92vw);
    position: relative;
    z-index: 2;
    overflow: hidden;
    animation: slideUp 0.8s ease-out;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Header Section */
  .login-header {
    padding: clamp(2rem, 5vw, 3rem) clamp(1.5rem, 4vw, 2rem)
      clamp(1.5rem, 4vw, 2rem);
    text-align: center;
    color: white;
    position: relative;
  }

  .logo-section {
    position: relative;
    z-index: 1;
  }

  .logo-circle {
    /* increased size: larger max and slightly larger preferred viewport percentage */
    width: clamp(80px, 18vw, 140px);
    height: clamp(80px, 18vw, 140px);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto clamp(1rem, 3vw, 1.5rem);
  }

  .logo-text {
    font-size: clamp(1.8rem, 6vw, 2rem);
    font-weight: bold;
    color: white;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  .login-title {
    font-size: clamp(1.5rem, 4vw, 2rem);
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    line-height: 1.2;
  }

  .login-subtitle {
    font-size: clamp(0.9rem, 2.5vw, 1rem);
    opacity: 0.9;
    font-weight: 300;
    line-height: 1.4;
  }

  /* Form Section */
  .login-form-container {
    padding: clamp(1.5rem, 4vw, 2.5rem) clamp(1.5rem, 4vw, 2rem);
    padding-top: 0;
  }

  .signup-link {
  color:  rgb(25, 141, 25);
  text-decoration: none;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  transition: all 0.3s ease;
}

.signup-link:hover {
  color: rgb(19, 230, 19);
}

  .form-fields {
    margin-bottom: clamp(1.5rem, 4vw, 2rem);
  }

  .form-group {
    margin-bottom: clamp(1rem, 3vw, 1.5rem);
  }

  .form-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 0.5rem;
    font-size: clamp(0.85rem, 2vw, 0.9rem);
  }

  .form-label i {
    color: #228b22;
    width: clamp(22px, 4vw, 16px);
    font-size: clamp(1.2rem, 4vw, 0.9rem);
    flex-shrink: 0;
  }

  .input-wrapper {
    position: relative;
    display: block;
  }


  .form-input {
    width: 100%;
    height: 48px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(34, 139, 34, 0.2);
    border-radius: 12px;
    padding: 0 16px;
    color: white;
    font-size: 16px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .form-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }

  .form-input:focus {
    outline: none;
    border-color: #228b22;
    background: rgba(34, 139, 34, 0.1);
    box-shadow: 0 0 0 3px rgba(34, 139, 34, 0.2);
  }

  /* Password Toggle */
  .password-toggle {
    position: absolute !important;
    right: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    background: none !important;
    border: none !important;
    color: rgba(255, 255, 255, 0.6) !important;
    cursor: pointer !important;
    padding: 4px !important;
    transition: color 0.3s ease !important;
    z-index: 10 !important;
    width: 24px !important;
    height: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    line-height: 1 !important;
  }

  .password-toggle:hover {
    color: white !important;
  }

  .password-toggle:focus {
    outline: none !important;
  }

  .field-errors {
    margin-top: 0.5rem;
  }

  .error-message {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #ef4444;
    font-size: clamp(0.8rem, 2vw, 0.875rem);
    line-height: 1.4;
  }

  .error-message i {
    font-size: clamp(1rem, 3.5vw, 0.875rem);
    flex-shrink: 0;
  }


  .login-btn:active {
    transform: translateY(0);
  }

  .login-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .login-btn:hover::before {
    left: 100%;
  }

  .login-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
  }

  /* Divider */
  .divider {
    position: relative;
    text-align: center;
    margin: clamp(1.5rem, 4vw, 2rem) 0;
  }

  .divider::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: rgba(34, 139, 34, 0.2);
  }

  .divider-text {
    background: rgba(0, 0, 0, 0.4);
    padding: 0 1rem;
    color: rgba(255, 255, 255, 0.6);
    font-size: clamp(0.8rem, 2vw, 0.875rem);
    position: relative;
  }

  /* Sign Up Section */
  .signup-section {
    text-align: center;
  }

  .signup-text {
    color: rgba(255, 255, 255, 0.7);
    font-size: clamp(0.9rem, 2.2vw, 0.95rem);
    line-height: 1.5;
  }

  .signup-link i {
    font-size: clamp(0.9rem, 3vw, 0.8rem);
  }


/* Back to Home Link */
.back-home {
  position: absolute;
  top: 24px;
  left: 24px;
  z-index: 100;
}

.back-link {
  display: flex;
  align-items: center;
  gap: 8px;
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.back-link:hover {
  color: white;
  transform: translateX(-4px);
}

.back-link i {
  transition: transform 0.3s ease;
}

.back-link:hover i {
  transform: translateX(-2px);
}


  /* Focus animations */
  .input-wrapper.focused .form-input {
    transform: scale(1.01);
  }

  /* Loading state */
  .btn-loader {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #000000;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #228b22, #006400);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #32cd32, #7a2470);
  }

  /* Selection colors */
  ::selection {
    background: rgba(34, 139, 34, 0.3);
    color: white;
  }

  ::-moz-selection {
    background: rgba(34, 139, 34, 0.3);
    color: white;
  }

  /* Responsive Design */

  /* Large tablets and small desktops */
  @media (max-width: 1024px) {
    .login-card {
      max-width: min(400px, 85vw);
    }

    .floating-accent {
      opacity: 0.7;
    }
  }

  /* Tablets */
  @media (max-width: 768px) {
    .login-container {
      padding: 1rem;
      align-items: flex-start;
      padding-top: clamp(2rem, 8vh, 4rem);
    }

    .login-card {
      max-width: 100%;
      margin: 0;
    }

    .back-home {
      position: static;
      text-align: center;
      margin-bottom: 1rem;
      order: -1;
    }

    .login-container {
      flex-direction: column;
    }

    .accent-1,
    .accent-2 {
      opacity: 0.5;
    }

    /* Enhanced mobile icon sizing */
    .form-label i {
      width: 20px;
      font-size: 1.1rem;
    }

    .error-message i {
      font-size: 1rem;
    }

    .back-link i {
      font-size: 1.1rem;
    }

    .signup-link i {
      font-size: 0.95rem;
    }
  }

  /* Mobile devices */
  @media (max-width: 480px) {
    .login-container {
      padding: 0.75rem;
      padding-top: clamp(1rem, 5vh, 2rem);
    }

    .login-card {
      border-radius: 12px;
    }

    .signup-text {
      text-align: center;
      line-height: 1.6;
    }

    .signup-link {
      display: block;
      margin-top: 0.5rem;
    }

    .back-text {
      display: none;
    }

    .floating-accent {
      display: none;
    }

    /* Mobile-specific icon improvements */
    .form-label i {
      width: 22px;
      font-size: 1.2rem;
    }



    .error-message i {
      font-size: 1.1rem;
    }

    .back-link i {
      font-size: 1.2rem;
    }

    .signup-link i {
      font-size: 1rem;
    }


  }

  /* Very small screens */
  @media (max-width: 360px) {
    .login-container {
      padding: 0.5rem;
    }

    .form-input {
      font-size: 16px; /* Prevent zoom on iOS */
    }

    /* Largest icons for very small screens */
    .form-label i {
      width: 24px;
      font-size: 1.3rem;
    }

    .error-message i {
      font-size: 1.2rem;
    }

    .back-link i {
      font-size: 1.3rem;
    }
  }

  /* Landscape orientation on mobile */
  @media (max-height: 600px) and (orientation: landscape) {
    .login-container {
      padding: 1rem;
      align-items: center;
    }

    .login-header {
      padding: 1.5rem 1.5rem 1rem;
    }

    .logo-circle {
      width: 50px;
      height: 50px;
      margin-bottom: 0.75rem;
    }

    .logo-text {
      font-size: 1.25rem;
    }

    .login-title {
      font-size: 1.25rem;
    }

    .back-home {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
    }

    .floating-accent {
      display: none;
    }
  }

  /* High DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .login-card {
      backdrop-filter: blur(25px);
    }

    .form-input {
      backdrop-filter: blur(15px);
    }
  }

  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .floating-accent {
      animation: none;
    }

    .login-card {
      animation: none;
    }

    * {
      transition-duration: 0.01ms !important;
      animation-duration: 0.01ms !important;
    }
  }

  /* Dark mode support (if system preference) */
  @media (prefers-color-scheme: dark) {
    .login-card {
      background: rgba(255, 255, 255, 0.02);
      border-color: rgba(34, 139, 34, 0.2);
    }
  }

  /* Print styles */
  @media print {
    .background-elements,
    .floating-accent,
    .back-home {
      display: none;
    }

    .login-card {
      box-shadow: none;
      border: 1px solid #ccc;
    }
  }
</style>

<script>
  // Password toggle functionality
  function togglePassword(fieldId) {
    const passwordField = document.getElementById(fieldId);
    const eyeIcon = document.getElementById("eye-" + fieldId);

    if (passwordField.type === "password") {
      passwordField.type = "text";
      eyeIcon.classList.remove("fa-eye");
      eyeIcon.classList.add("fa-eye-slash");
    } else {
      passwordField.type = "password";
      eyeIcon.classList.remove("fa-eye-slash");
      eyeIcon.classList.add("fa-eye");
    }
  }

  // Form submission with loading state
  document.getElementById("loginForm").addEventListener("submit", function (e) {
    const submitBtn = document.getElementById("loginBtn");
    const btnText = submitBtn.querySelector(".btn-text");
    const btnLoader = submitBtn.querySelector(".btn-loader");

    // Show loading state
    btnText.style.display = "none";
    btnLoader.style.display = "inline-block";
    submitBtn.disabled = true;

    // Add ripple effect
    const ripple = document.createElement("span");
    ripple.style.cssText = `
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    animation: ripple 0.6s linear;
    pointer-events: none;
    z-index: 1000;
  `;
    submitBtn.appendChild(ripple);

    setTimeout(() => {
      ripple.remove();
    }, 600);
  });

  // Add input focus animations
  document.querySelectorAll(".form-input").forEach((input) => {
    input.addEventListener("focus", function () {
      this.parentElement.classList.add("focused");
    });

    input.addEventListener("blur", function () {
      this.parentElement.classList.remove("focused");
    });
  });

  // Responsive adjustments based on viewport
  function adjustForViewport() {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty("--vh", `${vh}px`);

    // Adjust for mobile keyboards
    if (window.innerHeight < 500 && window.innerWidth < 768) {
      document.body.classList.add("keyboard-open");
    } else {
      document.body.classList.remove("keyboard-open");
    }
  }

  // Handle viewport changes
  window.addEventListener("resize", adjustForViewport);
  window.addEventListener("orientationchange", () => {
    setTimeout(adjustForViewport, 100);
  });

  // Add entrance animation delay for form elements
  document.addEventListener("DOMContentLoaded", function () {
    adjustForViewport();

    const formGroups = document.querySelectorAll(".form-group");
    formGroups.forEach((group, index) => {
      group.style.opacity = "0";
      group.style.transform = "translateY(20px)";

      setTimeout(() => {
        group.style.transition = "all 0.5s ease";
        group.style.opacity = "1";
        group.style.transform = "translateY(0)";
      }, 300 + index * 100);
    });

    // Add click feedback to all interactive elements
    document
      .querySelectorAll("button, .signup-link, .back-link")
      .forEach((element) => {
        element.addEventListener("click", function (e) {
          if (this.classList.contains("login-btn")) return;

          const ripple = document.createElement("span");
          const rect = this.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;

          ripple.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        background: rgba(34, 139, 34, 0.4);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
        z-index: 1000;
      `;

          this.style.position = "relative";
          this.style.overflow = "hidden";
          this.appendChild(ripple);

          setTimeout(() => {
            ripple.remove();
          }, 600);
        });
      });

    // Handle touch events for better mobile experience
    if ("ontouchstart" in window) {
      document.querySelectorAll(".form-input").forEach((input) => {
        input.addEventListener("touchstart", function () {
          this.focus();
        });
      });
    }
  });

  // Add ripple animation CSS
  const rippleStyle = document.createElement("style");
  rippleStyle.textContent = `
  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }
  
  .keyboard-open .login-container {
    padding-top: 1rem;
    align-items: flex-start;
  }
  
  .keyboard-open .login-header {
    padding: 1rem 1.5rem 0.75rem;
  }
  
  .keyboard-open .logo-circle {
    width: 40px;
    height: 40px;
    margin-bottom: 0.5rem;
  }
  
  .keyboard-open .logo-text {
    font-size: 1rem;
  }
  
  .keyboard-open .login-title {
    font-size: 1.25rem;
  }
`;
  document.head.appendChild(rippleStyle);
</script>

{% endblock %}
